<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <title>Swip</title>
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
  </head>

  <body>

    <h1 id="output"></h1>

    <script src="/socket.io/socket.io.js"></script>
    <script src="/swip/swip.js"></script>
    <script>
      const socket = io.connect();


      swip.device.requestSize(function (converter) {


        socket.emit('CONNECT_CLIENT', {
          size: {
            width: converter.toAbsPixel(window.innerHeight),
            height: converter.toAbsPixel(window.innerWidth),
          }
        });

        swip.sensor.onSwipe(window, function (evt) {
          socket.emit('SWIPE', evt);
        });

        swip.sensor.onMotion(function () {
          socket.emit('LEAVE_CLUSTER');
        });

        socket.on('CHANGED', function (data) {
          document.getElementById('output').innerHTML =  data.client.clusterId
        });
      });

    </script>
  </body>
</html>





